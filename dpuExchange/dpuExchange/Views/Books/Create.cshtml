@model dpuExchange.Models.MainModel

@{
    ViewBag.Title = "Post";
}

    <h2>Create a Post</h2>
    <div class="row">
    <div class="span4">
    @using (Html.BeginForm("Create", "Books"))
    {
        @Html.ValidationSummary(true)
        <fieldset>
            <legend>Please Enter Book Information</legend>
            <div class="editor-label">
                @Html.LabelFor(model => model.BooksModel.Isbn, "ISBN")
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.BooksModel.Isbn)
                @Html.ValidationMessageFor(model => model.BooksModel.Isbn)
            </div>
            <div class="editor-label">
                @Html.LabelFor(model => model.BooksModel.Title)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.BooksModel.Title)
                @Html.ValidationMessageFor(model => model.BooksModel.Title)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.BooksModel.Author)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.BooksModel.Author)
                @Html.ValidationMessageFor(model => model.BooksModel.Author)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.BooksModel.Price)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.BooksModel.Price)
                @Html.ValidationMessageFor(model => model.BooksModel.Price)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.BooksModel.Condition)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.BooksModel.Condition)
                @Html.ValidationMessageFor(model => model.BooksModel.Condition)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.BooksModel.Comments)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.BooksModel.Comments)
                @Html.ValidationMessageFor(model => model.BooksModel.Comments)
            </div>
            <div class="editor-label">
                @Html.LabelFor(model => model.BooksModel.ClassCode, "Department Code")
            </div>
            <div class="editor-field">
                @{
                    Dictionary<string, string> dictionary = new Dictionary<string, string>();
                            dictionary.Add("<Select Department>", "");
                            dictionary.Add("ANTH", "1");
                            dictionary.Add("ARAB", "2");
                            dictionary.Add("ARMY", "3");
                            dictionary.Add("ARTH", "4");
                            dictionary.Add("ARTS", "5");
                            dictionary.Add("ASIA", "6");
                            dictionary.Add("BIO", "7");
                            dictionary.Add("BLST", "8");
                            dictionary.Add("CFT", "9");
                            dictionary.Add("CHEM", "10");
                            dictionary.Add("CHIN", "11");
                            dictionary.Add("CLST", "12");
                            dictionary.Add("COMM", "13");
                            dictionary.Add("CSC", "14");
                            dictionary.Add("ECON", "15");
                            dictionary.Add("EDUC", "16");
                            dictionary.Add("ENG", "17");
                            dictionary.Add("FILM", "18");
                            dictionary.Add("FREN", "19");
                            dictionary.Add("GEOS", "20");
                            dictionary.Add("GERM", "21");
                            dictionary.Add("GRK", "22");
                            dictionary.Add("HIST", "23");
                            dictionary.Add("HONR", "24");
                            dictionary.Add("ITAL", "25");
                            dictionary.Add("JAPN", "26");
                            dictionary.Add("KINS", "27");
                            dictionary.Add("LAT", "28");
                            dictionary.Add("MATH", "29");
                            dictionary.Add("MUS", "30");
                            dictionary.Add("PE", "31");
                            dictionary.Add("PHIL", "32");
                            dictionary.Add("PHYS", "33");
                            dictionary.Add("POLS", "34");
                            dictionary.Add("PSY", "35");
                            dictionary.Add("REL", "36");
                            dictionary.Add("RUS", "37");
                            dictionary.Add("SOC", "38");
                            dictionary.Add("SPAN", "39");
                            dictionary.Add("UNIV", "40");
                            dictionary.Add("W S", "41");
                            dictionary.Add("OTHER", "42");
                            
                            SelectList list = new SelectList(dictionary, "value", "key");
                }
                @Html.DropDownListFor(model => model.BooksModel.ClassCode, list)
                </div>
               <input  class="btn" type="submit" value="Create" />
        </fieldset>
    }

    </div>
    <div class="row" style="float:left; margin-top:75px;">
            <img id="imageLookup" style="width:120px; height:160px;"   src="http://dummyimage.com/120x160/ADADAD/e3e3e3" onerror="this.src='http://dummyimage.com/120x160/ADADAD/e3e3e3';"/>
        </div>

    <div class="row">
        <div class="span5 offset2">
        <br />
        <div>
            <legend>Enter title to search for ISBN</legend>
                    @using (Html.BeginForm("searchForISBN", "Books"))
                    {
                        @Html.TextBoxFor(m => m.SearchModel.SearchByTitle, new { @class = "search-query" })
                        <input class="btn" id="searchForISBN" type="submit" value="Search" />
                    }
                        
                        
                        @using (Html.BeginForm())
                        {

                            if (this.Model != null)
                            {
                                if (Model.IsbnCollection != null)
                                {

                                    if (Model.IsbnCollection.numRecords >= 1)
                                    {
                                        <div id="resultMessage" style="color:Red">
                                            @Html.LabelFor(m => m.IsbnCollection.numRecords, "Showing top " + Model.IsbnCollection.numRecords + " results")
                                        </div>
                                        <br />
                                        <div class="resultItem">
                                            @Html.LabelFor(m => m.IsbnCollection.result1.Isbn)
                                            @Html.DisplayFor(m => m.IsbnCollection.result1.Isbn)
                                            <br />
                                            @Html.LabelFor(m => m.IsbnCollection.result1.Title)
                                            @Html.DisplayFor(m => m.IsbnCollection.result1.Title)
                                            <br />
                                            @Html.LabelFor(m => m.IsbnCollection.result1.Author)
                                            @Html.DisplayFor(m => m.IsbnCollection.result1.Author)
                                            <br /><br />
                                        </div>
                                    }
                                    if (Model.IsbnCollection.numRecords >= 2)
                                    {
                                        <div class="resultItem">
                                            @Html.LabelFor(m => m.IsbnCollection.result2.Isbn)
                                            @Html.DisplayFor(m => m.IsbnCollection.result2.Isbn)
                                            <br />
                                            @Html.LabelFor(m => m.IsbnCollection.result2.Title)
                                            @Html.DisplayFor(m => m.IsbnCollection.result2.Title)
                                            <br />
                                            @Html.LabelFor(m => m.IsbnCollection.result2.Author)
                                            @Html.DisplayFor(m => m.IsbnCollection.result2.Author)
                                            <br /><br />
                                        </div>
                                    }
                                    if (Model.IsbnCollection.numRecords >= 3)
                                    {
                                        <div class="resultItem">
                                            @Html.LabelFor(m => m.IsbnCollection.result3.Isbn)
                                            @Html.DisplayFor(m => m.IsbnCollection.result3.Isbn)
                                            <br />
                                            @Html.LabelFor(m => m.IsbnCollection.result3.Title)
                                            @Html.DisplayFor(m => m.IsbnCollection.result3.Title)
                                            <br />
                                            @Html.LabelFor(m => m.IsbnCollection.result3.Author)
                                            @Html.DisplayFor(m => m.IsbnCollection.result3.Author)
                                            <br /><br />
                                        </div>
                                    }
                                    if (Model.IsbnCollection.numRecords >= 4)
                                    {
                                        <div class="resultItem">
                                            @Html.LabelFor(m => m.IsbnCollection.result4.Isbn)
                                            @Html.DisplayFor(m => m.IsbnCollection.result4.Isbn)
                                            <br />
                                            @Html.LabelFor(m => m.IsbnCollection.result4.Title)
                                            @Html.DisplayFor(m => m.IsbnCollection.result4.Title)
                                            <br />
                                            @Html.LabelFor(m => m.IsbnCollection.result4.Author)
                                            @Html.DisplayFor(m => m.IsbnCollection.result4.Author)
                                            <br /><br />
                                        </div>
                                    }
                                    if (Model.IsbnCollection.numRecords == 0)
                                    {
                                       <div style="color:Red">
                                            Search did not return any results. Please refine search and try again.
                                        </div>
                                    }

                                }
                            }
                        }
                      
                </div>
                <div id="searchResults">
                    <p id="results"></p>
                </div>
        </div>
    </div>
</div>

<script src="../../../Scripts/jquery-1.5.1.js" type="text/javascript"></script>
<script type="text/javascript">
    var $ = jQuery;
    $("#BooksModel_Isbn").change(function () {
        var isbn = $("#BooksModel_Isbn").val();
        $("#imageLookup").attr("src", "http://covers.openlibrary.org/b/isbn/" + isbn + "-M.jpg?default=false");
    });
</script>